<!doctype html>
<html lang="pt-br">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <link rel="icon" type="image/ico" href="../imagens/icon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="../css/main.css">
    <script src="../main.js"></script>

    <title>Tratamento de erros com PHP</title>

  </head>

  <body class="bg-darkblue text-white">

    <div id="menu"> </div>

    <script>
      criarMenuPHP();
    </script>

    <section class="container pt-5 mt-5">

      <h1>Tratamento de erros com PHP</h1>


      <p class="lead">Erros sempre acontecem quando menos esperamos... Na verdade devemos sempre esperar por um erro. Quando esperamos por um erro, podemos tratá-lo de forma correta e impedir que a nossa aplicação trave ou retorne valores totalmente inconsistentes.</p>

      <ul class="lead">
        <li><strong><code>try</code></strong> - Declaração usada para tentar executar um trecho de código e capturar o seu erro</li>
        <li><strong><code>catch</code></strong> - Declaração usada para tratar o erro</li>
        <li><strong><code>throw</code></strong> - Declaração usada para criar erros</li>
        <li><strong><code>finally</code></strong> - Declaração usada executar um código depois de tentá-lo pegar, e que sempre será executado independentemente de haver ou não erros.</li>
      </ul>

      <hr class="space">

      <h2>Criando uma exceção</h2>

      <p class="lead">Uma exceção é um objeto que esclareça um erro ou comportamento inesperado de um script PHP. E para criamos a nossa própria exceção usamos a palavra reservada <code>throw</code>.</p>

      <div style="color: #d4d4d4;background-color: #1e1e1e;font-family: 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 14px;line-height: 19px;"><span style="color: #569cd6;">&lt;?php</span><br><span style="color: #d4d4d4;">&nbsp;&nbsp;</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #dcdcaa;">divide</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$dividendo</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">&nbsp;$divisor</span><span style="color: #d4d4d4;">) {</span><br><span style="color: #d4d4d4;">&nbsp; &nbsp;&nbsp;</span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$divisor</span><span style="color: #d4d4d4;">&nbsp;==&nbsp;</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">) {</span><br><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #4ec9b0;">Exception</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">&quot;Erro! Aconteceu uma divis&atilde;o por zero!&quot;</span><span style="color: #d4d4d4;">);</span><br><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">;</span><br><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span><br><span style="color: #d4d4d4;">&nbsp; &nbsp;&nbsp;</span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #9cdcfe;">$dividendo</span><span style="color: #d4d4d4;">&nbsp;/&nbsp;</span><span style="color: #9cdcfe;">$divisor</span><span style="color: #d4d4d4;">;</span><br><span style="color: #d4d4d4;">&nbsp; }</span><br><span style="color: #d4d4d4;">&nbsp;&nbsp;</span><span style="color: #dcdcaa;">echo</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #dcdcaa;">divide</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">,&nbsp;</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">);</span><br><span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span></div>


      <hr class="space">

      <h2>Capturando e tratando erros</h2>

      <p class="lead">Quando um erro é lançado, bastamos capturá-los com o bloco <code>try</code> e tratá-los no bloco <code>catch</code>. Um erro é um objeto, e portanto tem propriedades e métodos que podem ser acessadas, como:</p>

      <ul>
        <li><strong>getMessage()</strong> - retorna um texto que descreve o erro padrão</li>
        <li><strong>getPrevious()</strong> - Se esta exceção foi disparada por outra, este método retorna a exceção anterior. Caso contrário, ele retorna nulo</li>
        <li><strong>getCode()</strong> - Retorna o código da exceção</li>
        <li><strong>getFile()</strong> - Retorna o arquivo em que ocorreu a exceção</li>
        <li><strong>getLine()</strong> - Retorna a linha em que houve a exceção</li>
      </ul>

      <div style="color: #d4d4d4; background-color: #1e1e1e; font-family: Consolas, 'Courier New', monospace; font-weight: normal; font-size: 14px; line-height: 19px;">
        <div><span style="color: #569cd6;">&lt;?php</span></div>
        <br />
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">&nbsp;dividir($dividendo,&nbsp;$divisor)&nbsp;{</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #569cd6;">if</span><span style="color: #d4d4d4;">($divisor&nbsp;==&nbsp;</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">)&nbsp;{</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #569cd6;">throw</span><span style="color: #d4d4d4;">&nbsp;</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;">&nbsp;Exception(</span><span style="color: #ce9178;">"Erro!&nbsp;Aconteceu&nbsp;uma&nbsp;divis&atilde;o&nbsp;por&nbsp;zero!"</span><span style="color: #d4d4d4;">,&nbsp;</span><span style="color: #b5cea8;">18475</span><span style="color: #d4d4d4;">);</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;">;</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #569cd6;">return</span><span style="color: #d4d4d4;">&nbsp;$dividendo&nbsp;/&nbsp;$divisor;</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;}</span></div>
        <br />
        <div><span style="color: #569cd6;">try</span><span style="color: #d4d4d4;">&nbsp;{</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;echo&nbsp;dividir(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">,&nbsp;</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">);</span></div>
        <div><span style="color: #d4d4d4;">}&nbsp;</span><span style="color: #569cd6;">catch</span><span style="color: #d4d4d4;">(Exception&nbsp;$ex)&nbsp;{</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;$codigo&nbsp;=&nbsp;$ex-&gt;getCode();</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;$mensagem&nbsp;=&nbsp;$ex-&gt;getMessage();</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;$arquivo&nbsp;=&nbsp;$ex-&gt;getFile();</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;$linha&nbsp;=&nbsp;$ex-&gt;getLine();</span></div>
        <div><span style="color: #d4d4d4;">&nbsp;&nbsp;echo&nbsp;</span><span style="color: #ce9178;">"&lt;strong&gt;Ocorreu&nbsp;um&nbsp;erro&nbsp;no&nbsp;arquivo&nbsp;:&lt;/strong&gt;&nbsp;$arquivo&nbsp;na&nbsp;linha&nbsp;$linha:&nbsp;[C&oacute;digo:&nbsp;$codigo]</span></div>
        <div><span style="color: #ce9178;">&nbsp;&nbsp;$mensagem"</span><span style="color: #d4d4d4;">;</span></div>
        <div><span style="color: #d4d4d4;">}</span></div>
        <br />
        <div><span style="color: #569cd6;">?</span><span style="color: #569cd6;">&gt;</span></div>
      </div> <br>


      <p class="lead">Para ver com mais detalhes como implementar o tratamento de erros acesse <a href="https://www.php.net/manual/pt_BR/language.exceptions.php">Exceções</a>.</p>








    </section>

    <div id="rodape"></div>
    <script>
      rodape();
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


  </body>

</html>
